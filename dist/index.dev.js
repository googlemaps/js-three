this.google=this.google||{},this.google.maps=this.google.maps||{},this.google.maps.plugins=this.google.maps.plugins||{},this.google.maps.plugins.three=function(e,t,n,a,o,r,i,s,l,h,u,d,c,v,y,g,f,p,b,w,R,M,m,E,k,T,x,S,L,C,A){"use strict";function V(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var H=function(){function e(t){var n=t.anchor,a=void 0===n?{lat:0,lng:0,altitude:0}:n,o=t.rotation,r=void 0===o?new Float32Array([0,0,0]):o,i=t.scale,s=void 0===i?new Float32Array([1,1,1]):i,l=t.scene,h=t.THREE,u=t.map;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlay=new google.maps.WebGLOverlayView,this.renderer=null,this.camera=null,this.anchor=a,this.rotation=r,this.scale=s,this.THREE=h,this.scene=null!=l?l:new this.THREE.Scene,this.scene.rotation.x=Math.PI/2,this.overlay.onAdd=this.onAdd.bind(this),this.overlay.onRemove=this.onRemove.bind(this),this.overlay.onContextLost=this.onContextLost.bind(this),this.overlay.onContextRestored=this.onContextRestored.bind(this),this.overlay.onDraw=this.onDraw.bind(this),this.camera=new this.THREE.PerspectiveCamera,u&&this.setMap(u)}var t,n,a;return t=e,(n=[{key:"onStateUpdate",value:function(e){this.overlay.onStateUpdate(e)}},{key:"requestStateUpdate",value:function(){this.overlay.requestStateUpdate()}},{key:"onAdd",value:function(){}},{key:"onRemove",value:function(){}},{key:"getMap",value:function(){return this.overlay.getMap()}},{key:"requestRedraw",value:function(){this.overlay.requestRedraw()}},{key:"setMap",value:function(e){this.overlay.setMap(e)}},{key:"addListener",value:function(e,t){return this.overlay.addListener(e,t)}},{key:"bindTo",value:function(e,t,n,a){this.overlay.bindTo(e,t,n,a)}},{key:"get",value:function(e){return this.overlay.get(e)}},{key:"notify",value:function(e){this.overlay.notify(e)}},{key:"set",value:function(e,t){this.overlay.set(e,t)}},{key:"setValues",value:function(e){this.overlay.setValues(e)}},{key:"unbind",value:function(e){this.overlay.unbind(e)}},{key:"unbindAll",value:function(){this.overlay.unbindAll()}},{key:"onContextRestored",value:function(e){var t=e.gl;this.renderer=new this.THREE.WebGLRenderer(Object.assign({canvas:t.canvas,context:t},t.getContextAttributes())),this.renderer.autoClear=!1,this.renderer.autoClearDepth=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.THREE.PCFSoftShadowMap,this.renderer.outputEncoding=this.THREE.sRGBEncoding;var n=t.canvas,a=n.width,o=n.height;this.renderer.setViewport(0,0,a,o)}},{key:"onContextLost",value:function(){this.renderer&&(this.renderer.dispose(),this.renderer=null)}},{key:"onDraw",value:function(e){var t=e.gl,n=e.transformer;this.camera.projectionMatrix.fromArray(n.fromLatLngAltitude(this.anchor,this.rotation,this.scale)),t.disable(t.SCISSOR_TEST),this.requestRedraw(),this.renderer.render(this.scene,this.camera),this.renderer.resetState()}}])&&V(t.prototype,n),a&&V(t,a),e}(),O=6371010,P=Math.PI*O;function U(e){return e=function(e){return window.google&&google.maps&&e instanceof google.maps.LatLng?e.toJSON():e}(e),{x:O*A.MathUtils.degToRad(e.lng),y:0-O*Math.log(Math.tan(.5*(.5*Math.PI-A.MathUtils.degToRad(e.lat))))}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Vector3,n=U(e),a=n.x,o=n.y;return t.set(a,0,-o)}return e.EARTH_RADIUS=O,e.ThreeJSOverlayView=H,e.WORLD_SIZE=P,e.latLngToMeters=U,e.latLngToVector3=D,e.latLngToVector3Relative=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new A.Vector3,a=D(e),o=D(t);return n.setX(Math.abs(o.x-a.x)*Math.sign(a.x-o.x)),n.setY(Math.abs(o.y-a.y)*Math.sign(a.y-o.y)),n.setZ(Math.abs(o.z-a.z)*Math.sign(a.z-o.z)),n},Object.defineProperty(e,"__esModule",{value:!0}),e}({},0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,three);
//# sourceMappingURL=index.dev.js.map
